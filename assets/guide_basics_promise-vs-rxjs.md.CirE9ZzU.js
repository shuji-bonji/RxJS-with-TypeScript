import{_ as s,c as i,o as d,a2 as t}from"./chunks/framework.D3KFGq5-.js";const v=JSON.parse('{"title":"PromiseとRxJSの違い","description":"PromiseとRxJSの違いを理解し、適切な使い分けを学びます。Promiseは単一の非同期処理に特化し即座に実行されますが、RxJSは複数の値を扱えるLazy評価でキャンセルや再利用が可能です。コード比較と具体的なユースケースを通じて、それぞれの特性と選択基準を詳しく解説します。","frontmatter":{"description":"PromiseとRxJSの違いを理解し、適切な使い分けを学びます。Promiseは単一の非同期処理に特化し即座に実行されますが、RxJSは複数の値を扱えるLazy評価でキャンセルや再利用が可能です。コード比較と具体的なユースケースを通じて、それぞれの特性と選択基準を詳しく解説します。"},"headers":[],"relativePath":"guide/basics/promise-vs-rxjs.md","filePath":"guide/basics/promise-vs-rxjs.md","lastUpdated":1763164069000}'),n={name:"guide/basics/promise-vs-rxjs.md"};function h(l,a,k,p,e,b){return d(),i("div",null,[...a[0]||(a[0]=[t(`<h1 id="promiseとrxjsの違い" tabindex="-1" data-v-db4642f2>PromiseとRxJSの違い <a class="header-anchor" href="#promiseとrxjsの違い" aria-label="Permalink to &quot;PromiseとRxJSの違い&quot;" data-v-db4642f2>​</a></h1><h2 id="概要" tabindex="-1" data-v-db4642f2>概要 <a class="header-anchor" href="#概要" aria-label="Permalink to &quot;概要&quot;" data-v-db4642f2>​</a></h2><p data-v-db4642f2>JavaScript/TypeScriptにおける非同期処理を扱う主要なツールとして、 <strong data-v-db4642f2>Promise</strong>と<strong data-v-db4642f2>RxJS（Observable）</strong> があります。両者は似た目的で使用されることがありますが、設計思想とユースケースが大きく異なります。</p><p data-v-db4642f2>このページでは、PromiseとRxJSの違いを理解し、どちらを使うべきかを判断するための情報を提供します。</p><h2 id="基本的な違い" tabindex="-1" data-v-db4642f2>基本的な違い <a class="header-anchor" href="#基本的な違い" aria-label="Permalink to &quot;基本的な違い&quot;" data-v-db4642f2>​</a></h2><table tabindex="0" data-v-db4642f2><thead data-v-db4642f2><tr data-v-db4642f2><th data-v-db4642f2>項目</th><th data-v-db4642f2>Promise</th><th data-v-db4642f2>RxJS (Observable)</th></tr></thead><tbody data-v-db4642f2><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>標準化</strong></td><td data-v-db4642f2>JavaScript標準（ES6/ES2015）</td><td data-v-db4642f2>サードパーティライブラリ</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>発行する値</strong></td><td data-v-db4642f2>単一の値</td><td data-v-db4642f2>0個以上の複数の値</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>評価</strong></td><td data-v-db4642f2>Eager（作成時に即実行）</td><td data-v-db4642f2>Lazy（購読時に実行）</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>キャンセル</strong></td><td data-v-db4642f2>不可<sup class="footnote-ref" data-v-db4642f2><a href="#fn1" id="fnref1" data-v-db4642f2>[1]</a></sup></td><td data-v-db4642f2>可（<code data-v-db4642f2>unsubscribe()</code>）</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>再利用</strong></td><td data-v-db4642f2>不可（結果は1度だけ）</td><td data-v-db4642f2>可（何度でも購読可能）</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>学習コスト</strong></td><td data-v-db4642f2>低い</td><td data-v-db4642f2>高い（オペレーターの理解が必要）</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>ユースケース</strong></td><td data-v-db4642f2>単一の非同期処理</td><td data-v-db4642f2>複雑なストリーム処理</td></tr></tbody></table><h2 id="コード比較-単一の非同期処理" tabindex="-1" data-v-db4642f2>コード比較： 単一の非同期処理 <a class="header-anchor" href="#コード比較-単一の非同期処理" aria-label="Permalink to &quot;コード比較： 単一の非同期処理&quot;" data-v-db4642f2>​</a></h2><h3 id="promise" tabindex="-1" data-v-db4642f2>Promise <a class="header-anchor" href="#promise" aria-label="Permalink to &quot;Promise&quot;" data-v-db4642f2>​</a></h3><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// Promiseは作成時に即実行される（Eager）</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>)</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>())</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(data))</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(error));</span></span></code></pre></div><p data-v-db4642f2>Promiseは<strong data-v-db4642f2>定義した瞬間に実行が始まります</strong>（Eager評価）。</p><h3 id="rxjs" tabindex="-1" data-v-db4642f2>RxJS <a class="header-anchor" href="#rxjs" aria-label="Permalink to &quot;RxJS&quot;" data-v-db4642f2>​</a></h3><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { from } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { switchMap, catchError } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { of } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// Observableは購読するまで実行されない（Lazy）</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> observable$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  switchMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>()), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// response.json()はPromiseを返すのでswitchMapを使用</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  catchError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(error);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  })</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 購読して初めて実行される</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>observable$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(data));</span></span></code></pre></div><p data-v-db4642f2>RxJSは <strong data-v-db4642f2><code data-v-db4642f2>subscribe()</code> が呼ばれるまで実行されません</strong> （Lazy評価）。同じObservableを複数回購読すると独立した実行が行われ、<code data-v-db4642f2>unsubscribe()</code> で処理を中断できます。</p><div class="tip custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>TIP</p><p data-v-db4642f2><strong data-v-db4642f2>実務での使い分け</strong></p><ul data-v-db4642f2><li data-v-db4642f2>即座に実行したい単発の処理 → Promise</li><li data-v-db4642f2>必要なタイミングで実行したい、または複数回実行したい処理 → RxJS</li></ul></div><h2 id="コード比較-複数の値を扱う場合" tabindex="-1" data-v-db4642f2>コード比較： 複数の値を扱う場合 <a class="header-anchor" href="#コード比較-複数の値を扱う場合" aria-label="Permalink to &quot;コード比較： 複数の値を扱う場合&quot;" data-v-db4642f2>​</a></h2><p data-v-db4642f2>PromiseとRxJSの最も大きな違いの一つが、発行できる値の数です。Promiseは単一の値しか返せませんが、RxJSは複数の値を時系列で発行できます。</p><h3 id="promiseでは不可能" tabindex="-1" data-v-db4642f2>Promiseでは不可能 <a class="header-anchor" href="#promiseでは不可能" aria-label="Permalink to &quot;Promiseでは不可能&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>Promiseは<strong data-v-db4642f2>一度しか解決できません</strong>。</p><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// Promiseは単一の値しか返せない</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>resolve</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// この値は無視される</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// この値も無視される</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>});</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>promise.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(value));</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 出力: 1（最初の値のみ）</span></span></code></pre></div><p data-v-db4642f2>最初の <code data-v-db4642f2>resolve()</code> で値が確定すると、それ以降の <code data-v-db4642f2>resolve()</code> は無視されます。</p><h3 id="rxjsでは可能" tabindex="-1" data-v-db4642f2>RxJSでは可能 <a class="header-anchor" href="#rxjsでは可能" aria-label="Permalink to &quot;RxJSでは可能&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>Observableは<strong data-v-db4642f2>何度でも値を発行できます</strong>。</p><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { Observable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// Observableは複数の値を発行できる</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> observable$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>subscriber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>();</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>});</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>observable$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(value));</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 出力: 1, 2, 3</span></span></code></pre></div><p data-v-db4642f2><code data-v-db4642f2>next()</code> を呼ぶたびに、購読者に値が届きます。すべての値を発行した後は <code data-v-db4642f2>complete()</code> で完了を通知します。この特性により、リアルタイム通信、ストリーミングデータ、連続的なイベント処理など、時系列で変化するデータを自然に扱えます。</p><div class="note custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>NOTE</p><p data-v-db4642f2><strong data-v-db4642f2>実務での応用例</strong></p><ul data-v-db4642f2><li data-v-db4642f2>WebSocketのメッセージ受信</li><li data-v-db4642f2>キーボード入力の逐次処理</li><li data-v-db4642f2>サーバーからのイベントストリーム（SSE）</li><li data-v-db4642f2>センサーデータの継続的な監視</li></ul></div><h2 id="キャンセルの比較" tabindex="-1" data-v-db4642f2>キャンセルの比較 <a class="header-anchor" href="#キャンセルの比較" aria-label="Permalink to &quot;キャンセルの比較&quot;" data-v-db4642f2>​</a></h2><p data-v-db4642f2>長時間かかる処理や、不要になった非同期処理をキャンセルできるかどうかは、リソース管理とユーザー体験の観点で重要です。PromiseとRxJSでは、キャンセル機能に大きな違いがあります。</p><h3 id="promise-キャンセル不可" tabindex="-1" data-v-db4642f2>Promise（キャンセル不可） <a class="header-anchor" href="#promise-キャンセル不可" aria-label="Permalink to &quot;Promise（キャンセル不可）&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>Promiseには<strong data-v-db4642f2>標準的なキャンセル機能がありません</strong>。</p><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>resolve</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;完了&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>});</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>promise.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(result));</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// この処理をキャンセルする標準的な方法はない</span></span></code></pre></div><p data-v-db4642f2>一度実行が始まると完了するまで止められず、メモリリークやパフォーマンス低下の原因になります。</p><div class="warning custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>WARNING</p><p data-v-db4642f2><strong data-v-db4642f2>AbortController について</strong><code data-v-db4642f2>fetch()</code> などのWeb APIは <code data-v-db4642f2>AbortController</code> を使ってキャンセルできますが、これはPromise自体の機能ではなく、個別のAPIが提供する仕組みです。すべての非同期処理で使えるわけではありません。</p></div><h3 id="rxjs-キャンセル可能" tabindex="-1" data-v-db4642f2>RxJS（キャンセル可能） <a class="header-anchor" href="#rxjs-キャンセル可能" aria-label="Permalink to &quot;RxJS（キャンセル可能）&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>RxJSは <strong data-v-db4642f2><code data-v-db4642f2>unsubscribe()</code> でいつでもキャンセルできます</strong>。</p><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { timer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> subscription</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> timer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;完了&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>)</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 1秒後にキャンセル</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  subscription.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>unsubscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// キャンセル</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;キャンセルしました&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 出力: キャンセルしました（「完了」は出力されない）</span></span></code></pre></div><p data-v-db4642f2>購読を解除すると進行中の処理が即座に停止し、メモリリークを防げます。</p><div class="tip custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>TIP</p><p data-v-db4642f2><strong data-v-db4642f2>実務でのキャンセル活用例</strong></p><ul data-v-db4642f2><li data-v-db4642f2>ユーザーが画面を離れたときにHTTPリクエストをキャンセル</li><li data-v-db4642f2>古い検索クエリの結果を破棄して、最新のクエリだけ処理（<code data-v-db4642f2>switchMap</code>）</li><li data-v-db4642f2>コンポーネント破棄時に、すべてのObservableを自動的にキャンセル（<code data-v-db4642f2>takeUntil</code>パターン）</li></ul></div><h2 id="どちらを選ぶべきか" tabindex="-1" data-v-db4642f2>どちらを選ぶべきか <a class="header-anchor" href="#どちらを選ぶべきか" aria-label="Permalink to &quot;どちらを選ぶべきか&quot;" data-v-db4642f2>​</a></h2><p data-v-db4642f2>PromiseとRxJSのどちらを使うべきかは、処理の性質とプロジェクトの要件によって変わります。以下の基準を参考に、適切なツールを選択しましょう。</p><h3 id="promiseを選ぶべき場合" tabindex="-1" data-v-db4642f2>Promiseを選ぶべき場合 <a class="header-anchor" href="#promiseを選ぶべき場合" aria-label="Permalink to &quot;Promiseを選ぶべき場合&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>以下の条件に当てはまる場合は、Promiseが適しています。</p><table tabindex="0" data-v-db4642f2><thead data-v-db4642f2><tr data-v-db4642f2><th data-v-db4642f2>条件</th><th data-v-db4642f2>理由</th></tr></thead><tbody data-v-db4642f2><tr data-v-db4642f2><td data-v-db4642f2>単一の非同期処理</td><td data-v-db4642f2>APIリクエスト1回、ファイル読み込み1回など</td></tr><tr data-v-db4642f2><td data-v-db4642f2>シンプルなワークフロー</td><td data-v-db4642f2><code data-v-db4642f2>Promise.all</code>, <code data-v-db4642f2>Promise.race</code>で十分</td></tr><tr data-v-db4642f2><td data-v-db4642f2>小規模プロジェクト</td><td data-v-db4642f2>依存関係を最小限にしたい</td></tr><tr data-v-db4642f2><td data-v-db4642f2>標準APIのみ使用</td><td data-v-db4642f2>外部ライブラリを避けたい</td></tr><tr data-v-db4642f2><td data-v-db4642f2>初心者向けコード</td><td data-v-db4642f2>学習コストを抑えたい</td></tr></tbody></table><h4 id="単一のapiリクエスト" tabindex="-1" data-v-db4642f2>単一のAPIリクエスト: <a class="header-anchor" href="#単一のapiリクエスト" aria-label="Permalink to &quot;単一のAPIリクエスト:&quot;" data-v-db4642f2>​</a></h4><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  email</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>}</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> getUserData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>userId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>&gt; {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>\`https://jsonplaceholder.typicode.com/users/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>userId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>response.ok) {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;ユーザーデータの取得に失敗しました&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  }</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>();</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>}</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 使用例</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>getUserData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;ユーザー名:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, user.name);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;メール:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, user.email);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>});</span></span></code></pre></div><p data-v-db4642f2>このコードは、単一のユーザー情報を取得する典型的なパターンです。<code data-v-db4642f2>async/await</code> を使うことで、同期的なコードのように読みやすく書けます。エラーハンドリングも <code data-v-db4642f2>try/catch</code> で統一でき、シンプルで直感的です。</p><h4 id="複数の非同期処理を並列実行" tabindex="-1" data-v-db4642f2>複数の非同期処理を並列実行: <a class="header-anchor" href="#複数の非同期処理を並列実行" aria-label="Permalink to &quot;複数の非同期処理を並列実行:&quot;" data-v-db4642f2>​</a></h4><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  userId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>}</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> loadAllData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>&lt;[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>[], </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>Post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>[]]&gt; {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>users</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>posts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>([</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>    fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;https://jsonplaceholder.typicode.com/users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>()),</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>    fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;https://jsonplaceholder.typicode.com/posts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>())</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  ]);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> [users, posts];</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>}</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 使用例</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>loadAllData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(([</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>users</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>posts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;ユーザー数:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, users.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;投稿数:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, posts.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>});</span></span></code></pre></div><p data-v-db4642f2><code data-v-db4642f2>Promise.all()</code> を使うことで、複数のAPIリクエストを並列に実行し、すべてが完了するのを待つことができます。これは初期データ読み込みなどで非常に便利です。一つでも失敗すると全体がエラーになる点に注意が必要ですが、そのシンプルさゆえに理解しやすく、メンテナンスも容易です。</p><h3 id="rxjsを選ぶべき場合" tabindex="-1" data-v-db4642f2>RxJSを選ぶべき場合 <a class="header-anchor" href="#rxjsを選ぶべき場合" aria-label="Permalink to &quot;RxJSを選ぶべき場合&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>以下の条件に当てはまる場合は、RxJSが適しています。</p><table tabindex="0" data-v-db4642f2><thead data-v-db4642f2><tr data-v-db4642f2><th data-v-db4642f2>条件</th><th data-v-db4642f2>理由</th></tr></thead><tbody data-v-db4642f2><tr data-v-db4642f2><td data-v-db4642f2>連続的なイベント処理</td><td data-v-db4642f2>マウス移動、キーボード入力、WebSocketなど</td></tr><tr data-v-db4642f2><td data-v-db4642f2>複雑なストリーム処理</td><td data-v-db4642f2>複数のイベントソースの結合や変換</td></tr><tr data-v-db4642f2><td data-v-db4642f2>キャンセルが必要</td><td data-v-db4642f2>リソース管理を細かく制御したい</td></tr><tr data-v-db4642f2><td data-v-db4642f2>リトライ・タイムアウト</td><td data-v-db4642f2>エラー処理を柔軟に行いたい</td></tr><tr data-v-db4642f2><td data-v-db4642f2>Angularプロジェクト</td><td data-v-db4642f2>RxJSがフレームワークに統合されている</td></tr><tr data-v-db4642f2><td data-v-db4642f2>リアルタイムデータ</td><td data-v-db4642f2>データが継続的に更新される</td></tr></tbody></table><h4 id="具体例" tabindex="-1" data-v-db4642f2>具体例 <a class="header-anchor" href="#具体例" aria-label="Permalink to &quot;具体例&quot;" data-v-db4642f2>​</a></h4><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { fromEvent } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { debounceTime, map, distinctUntilChanged, switchMap } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>label.innerText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;search: &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> searchInput</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>searchInput.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>label.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(searchInput);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(label);</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// リアルタイム検索（オートコンプリート）</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>searchInput) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;検索入力欄が見つかりません&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>fromEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(searchInput, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> (event.target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> HTMLInputElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).value),</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  debounceTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>),              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 300ms待ってから処理</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  distinctUntilChanged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(),         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 値が変わった時だけ処理</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  switchMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>              // 最新のリクエストのみ実行</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>    fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>\`https://api.github.com/search/users?q=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>query</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>())</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  )</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;検索結果:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, results.items); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// GitHub APIはitemsプロパティに結果を格納</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>});</span></span></code></pre></div><p data-v-db4642f2>この例は、RxJSの真価が発揮される典型的なケースです。ユーザーの入力を監視し、300msの待機時間を設けて無駄なリクエストを減らし、値が変わったときだけ処理を行い、さらに最新のリクエストだけを有効にする（<code data-v-db4642f2>switchMap</code>）ことで、古いリクエストの結果を自動的に破棄します。</p><div class="important custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>IMPORTANT</p><p data-v-db4642f2><strong data-v-db4642f2>Promiseだけでは困難な理由</strong></p><ul data-v-db4642f2><li data-v-db4642f2>debounce（連続入力の制御）を手動実装する必要がある</li><li data-v-db4642f2>古いリクエストのキャンセルを自分で管理しなければならない</li><li data-v-db4642f2>イベントリスナーのクリーンアップを忘れるとメモリリークが発生する</li><li data-v-db4642f2>複数の状態（タイマー、フラグ、リクエスト管理）を同時に追跡する必要がある</li></ul><p data-v-db4642f2>RxJSでは、これらがすべて宣言的に、数行で実現できます。</p></div><h2 id="promiseとrxjsの相互運用" tabindex="-1" data-v-db4642f2>PromiseとRxJSの相互運用 <a class="header-anchor" href="#promiseとrxjsの相互運用" aria-label="Permalink to &quot;PromiseとRxJSの相互運用&quot;" data-v-db4642f2>​</a></h2><p data-v-db4642f2>PromiseとRxJSは排他的なものではなく、相互に変換して組み合わせることができます。既存のPromiseベースのコードをRxJSのパイプラインに統合したり、逆にObservableを既存のPromiseベースのコードで使いたい場合に便利です。</p><h2 id="promiseをobservableに変換" tabindex="-1" data-v-db4642f2>PromiseをObservableに変換 <a class="header-anchor" href="#promiseをobservableに変換" aria-label="Permalink to &quot;PromiseをObservableに変換&quot;" data-v-db4642f2>​</a></h2><p data-v-db4642f2>RxJSは、既存のPromiseをObservableに変換するための複数の方法を提供しています。</p><h3 id="from-による変換" tabindex="-1" data-v-db4642f2><code data-v-db4642f2>from</code> による変換 <a class="header-anchor" href="#from-による変換" aria-label="Permalink to &quot;\`from\` による変換&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>最も一般的な方法は <code data-v-db4642f2>from</code> を使うことです。</p><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { from } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// Promiseを作成</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>)</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>());</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// from()でObservableに変換</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> observable$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(promise);</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>observable$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>({</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;データ:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, data),</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;エラー:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, error),</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;完了&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>)</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>});</span></span></code></pre></div><p data-v-db4642f2><code data-v-db4642f2>from()</code> は、Promiseが解決すると1つの値を発行し、即座に <code data-v-db4642f2>complete</code> します。エラーが発生すると <code data-v-db4642f2>error</code> 通知が送られます。この変換により、Promise由来のデータに対しても、RxJSのオペレーター（<code data-v-db4642f2>map</code>, <code data-v-db4642f2>filter</code>, <code data-v-db4642f2>retry</code> など）を自由に適用できるようになります。</p><h3 id="defer-による変換-遅延評価" tabindex="-1" data-v-db4642f2><code data-v-db4642f2>defer</code> による変換（遅延評価） <a class="header-anchor" href="#defer-による変換-遅延評価" aria-label="Permalink to &quot;\`defer\` による変換（遅延評価）&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2><code data-v-db4642f2>defer</code> は、購読されるまでPromiseの作成を遅延させます。</p><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { defer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// subscribe されるまで Promise は作成されない</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> observable$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> defer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=&gt;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>())</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 購読ごとに新しい Promise を作成</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>observable$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;1回目:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, data));</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>observable$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;2回目:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, data));</span></span></code></pre></div><p data-v-db4642f2>この方法は、購読するたびに新しいPromiseを作成したい場合に便利です。</p><h2 id="observableをpromiseに変換" tabindex="-1" data-v-db4642f2>ObservableをPromiseに変換 <a class="header-anchor" href="#observableをpromiseに変換" aria-label="Permalink to &quot;ObservableをPromiseに変換&quot;" data-v-db4642f2>​</a></h2><p data-v-db4642f2>Observableから1つの値だけを取り出して、Promiseにすることができます。</p><h3 id="firstvaluefrom-と-lastvaluefrom" tabindex="-1" data-v-db4642f2><code data-v-db4642f2>firstValueFrom</code> と <code data-v-db4642f2>lastValueFrom</code> <a class="header-anchor" href="#firstvaluefrom-と-lastvaluefrom" aria-label="Permalink to &quot;\`firstValueFrom\` と \`lastValueFrom\`&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>RxJS 7以降では、以下の2つの関数が推奨されます。</p><table tabindex="0" data-v-db4642f2><thead data-v-db4642f2><tr data-v-db4642f2><th data-v-db4642f2>関数</th><th data-v-db4642f2>動作</th></tr></thead><tbody data-v-db4642f2><tr data-v-db4642f2><td data-v-db4642f2><code data-v-db4642f2>firstValueFrom</code></td><td data-v-db4642f2>最初の値をPromiseとして返す</td></tr><tr data-v-db4642f2><td data-v-db4642f2><code data-v-db4642f2>lastValueFrom</code></td><td data-v-db4642f2>完了時の最後の値をPromiseとして返す</td></tr></tbody></table><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { of, firstValueFrom, lastValueFrom } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { delay } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> observable$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>));</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 最初の値をPromiseとして取得</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> firstValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> firstValueFrom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(observable$);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(firstValue); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 1</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 最後の値をPromiseとして取得</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> lastValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> lastValueFrom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(observable$);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(lastValue); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// 3</span></span></code></pre></div><p data-v-db4642f2>Observableが値を流す前に完了した場合、デフォルトではエラーになります。デフォルト値を指定することで回避できます。</p><div class="warning custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>WARNING</p><p data-v-db4642f2><code data-v-db4642f2>toPromise()</code>は非推奨です。代わりに<code data-v-db4642f2>firstValueFrom()</code>または<code data-v-db4642f2>lastValueFrom()</code>を使用してください。</p></div><div class="tip custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>TIP</p><p data-v-db4642f2><strong data-v-db4642f2>選択のガイドライン</strong></p><ul data-v-db4642f2><li data-v-db4642f2><strong data-v-db4642f2><code data-v-db4642f2>firstValueFrom()</code></strong>: 最初の値だけが必要な場合（例: ログイン認証結果）</li><li data-v-db4642f2><strong data-v-db4642f2><code data-v-db4642f2>lastValueFrom()</code></strong>: すべてのデータを処理した後の最終結果が必要な場合（例: 集計結果）</li></ul></div><h2 id="実践例-両者を組み合わせる" tabindex="-1" data-v-db4642f2>実践例：両者を組み合わせる <a class="header-anchor" href="#実践例-両者を組み合わせる" aria-label="Permalink to &quot;実践例：両者を組み合わせる&quot;" data-v-db4642f2>​</a></h2><p data-v-db4642f2>実際のアプリケーションでは、PromiseとRxJSを組み合わせて使用することが一般的です。</p><div class="warning custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>実務での注意事項</p><p data-v-db4642f2>PromiseとObservableの混在は、<strong data-v-db4642f2>設計の境界を明確にしないとアンチパターンに陥りやすい</strong>です。</p><p data-v-db4642f2><strong data-v-db4642f2>よくある問題：</strong></p><ul data-v-db4642f2><li data-v-db4642f2>キャンセル不能になる</li><li data-v-db4642f2>エラーハンドリングの分離</li><li data-v-db4642f2><code data-v-db4642f2>subscribe</code>内での<code data-v-db4642f2>await</code>（特に危険）</li><li data-v-db4642f2>同じデータを Promise と Observable で並行取得</li></ul><p data-v-db4642f2>詳しくは <strong data-v-db4642f2><a href="/RxJS-with-TypeScript/guide/anti-patterns/promise-observable-mixing.html" data-v-db4642f2>Chapter 10: PromiseとObservableの混在アンチパターン</a></strong> を参照してください。</p></div><h3 id="フォーム送信とapi呼び出し" tabindex="-1" data-v-db4642f2>フォーム送信とAPI呼び出し <a class="header-anchor" href="#フォーム送信とapi呼び出し" aria-label="Permalink to &quot;フォーム送信とAPI呼び出し&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>ユーザーのフォーム送信イベントをRxJSで捕捉し、Fetch API (Promise) を使ってサーバーに送信する例です。</p><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { fromEvent, from } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { exhaustMap, catchError } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { of } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  email</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>}</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// Promiseベースのフォーム送信</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> submitForm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>&lt;{ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>success</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> }&gt; {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;https://api.example.com/submit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>    method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;POST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>,</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>    headers: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;Content-Type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;application/json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> },</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>    body: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(data)</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  });</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>response.ok) {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;送信に失敗しました&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  }</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>();</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>}</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// RxJSでイベントストリームを管理</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> submitButton</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>submitButton.id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;submit-button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>submitButton.innerText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;送信&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>submitButton.style.padding </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;10px 20px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>submitButton.style.margin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;10px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(submitButton);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>submitButton) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;送信ボタンが見つかりません&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>fromEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(submitButton, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  exhaustMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> formData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> FormData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>      username: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;testuser&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>,</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>      email: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;test@example.com&#39;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>    };</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>    // Promise関数をObservableに変換</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>submitForm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(formData));</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  }),</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  catchError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;送信エラー:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, error);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>({ success: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> });</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  })</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> (result.success) {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;送信成功&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;送信失敗&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  }</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>});</span></span></code></pre></div><p data-v-db4642f2>フォーム送信ボタンがクリックされるたびに、新しい送信プロセスが開始されますが、<strong data-v-db4642f2>送信中は新しい送信を無視します</strong>。</p><p data-v-db4642f2>この例では、<code data-v-db4642f2>exhaustMap</code> の使用により、送信中の重複リクエストを防いでいます。</p><h3 id="検索オートコンプリート" tabindex="-1" data-v-db4642f2>検索オートコンプリート <a class="header-anchor" href="#検索オートコンプリート" aria-label="Permalink to &quot;検索オートコンプリート&quot;" data-v-db4642f2>​</a></h3><p data-v-db4642f2>入力フォームの値の変化を監視し、API検索を行う例です。</p><div class="language-ts vp-adaptive-theme" data-v-db4642f2><button title="Copy Code" class="copy" data-v-db4642f2></button><span class="lang" data-v-db4642f2>ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-db4642f2><code data-v-db4642f2><span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { fromEvent, from } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { debounceTime, switchMap, catchError } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> { of } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> SearchResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  items</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>&lt;{</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>    login</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>    id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>    avatar_url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  }&gt;;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>  total_count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>}</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// Promise ベースのAPI関数</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> searchAPI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>SearchResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>&gt; {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>\`https://api.github.com/search/users?q=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>query</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>response.ok) {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;検索に失敗しました&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  }</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>();</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>}</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// RxJSでイベントストリームを管理</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>label.innerText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;search: &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> searchInput</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>searchInput.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2> &#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>label.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(searchInput);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(label);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>searchInput) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;検索入力欄が見つかりません&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>);</span></span>
<span class="line" data-v-db4642f2></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>fromEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(searchInput, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  debounceTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>),</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  switchMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2> query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> (event.target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> HTMLInputElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).value;</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>    // Promise関数をObservableに変換</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>searchAPI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(query));</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  }),</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>  catchError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(error);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2>    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>({ items: [], total_count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-db4642f2>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> }); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-db4642f2>// エラー時は空の結果を返す</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  })</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-db4642f2>result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-db4642f2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2> {</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;検索結果:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, result.items);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-db4642f2>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-db4642f2>&#39;合計:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>, result.total_count);</span></span>
<span class="line" data-v-db4642f2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-db4642f2>});</span></span></code></pre></div><div class="tip custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>TIP</p><p data-v-db4642f2><strong data-v-db4642f2>責務の分離による設計</strong></p><ul data-v-db4642f2><li data-v-db4642f2><strong data-v-db4642f2>RxJS</strong>: イベント制御を担当（debounce、switchMapなど）</li><li data-v-db4642f2><strong data-v-db4642f2>Promise</strong>: HTTPリクエストを担当（async/await）</li><li data-v-db4642f2><strong data-v-db4642f2><code data-v-db4642f2>from()</code></strong>: 両者を橋渡し</li></ul><p data-v-db4642f2>各技術を適材適所で使い分けることで、コードの可読性と保守性が向上します。</p></div><h2 id="メリットとデメリット" tabindex="-1" data-v-db4642f2>メリットとデメリット <a class="header-anchor" href="#メリットとデメリット" aria-label="Permalink to &quot;メリットとデメリット&quot;" data-v-db4642f2>​</a></h2><h3 id="promise-1" tabindex="-1" data-v-db4642f2>Promise <a class="header-anchor" href="#promise-1" aria-label="Permalink to &quot;Promise&quot;" data-v-db4642f2>​</a></h3><div class="comparison-cards" data-v-db4642f2><div class="tip custom-block" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>メリット</p><ul data-v-db4642f2><li data-v-db4642f2>JavaScript標準のため依存関係不要</li><li data-v-db4642f2><code data-v-db4642f2>async/await</code>により直感的で読みやすいコード</li><li data-v-db4642f2>学習コストが低い</li><li data-v-db4642f2>単一タスクの処理がシンプル</li></ul></div><div class="danger custom-block" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>デメリット</p><ul data-v-db4642f2><li data-v-db4642f2>複数の値を扱えない</li><li data-v-db4642f2>キャンセル機能がない</li><li data-v-db4642f2>連続的なストリーム処理には不向き</li><li data-v-db4642f2>複雑なイベント処理が困難</li></ul></div></div><h3 id="rxjs-1" tabindex="-1" data-v-db4642f2>RxJS <a class="header-anchor" href="#rxjs-1" aria-label="Permalink to &quot;RxJS&quot;" data-v-db4642f2>​</a></h3><div class="comparison-cards" data-v-db4642f2><div class="tip custom-block" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>メリット</p><ul data-v-db4642f2><li data-v-db4642f2>複数の値を時系列で扱える</li><li data-v-db4642f2>豊富なオペレーターで複雑な処理が可能</li><li data-v-db4642f2>キャンセル（<code data-v-db4642f2>unsubscribe</code>）が簡単</li><li data-v-db4642f2>エラー処理やリトライを柔軟に実装可能</li><li data-v-db4642f2>宣言的でテストしやすい</li></ul></div><div class="danger custom-block" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>デメリット</p><ul data-v-db4642f2><li data-v-db4642f2>学習コストが高い</li><li data-v-db4642f2>ライブラリへの依存が必要</li><li data-v-db4642f2>オーバーヘッドがある（小規模プロジェクトでは過剰）</li><li data-v-db4642f2>デバッグが難しい場合がある</li></ul></div></div><h2 id="rxjsが特に活躍する分野" tabindex="-1" data-v-db4642f2>RxJSが特に活躍する分野 <a class="header-anchor" href="#rxjsが特に活躍する分野" aria-label="Permalink to &quot;RxJSが特に活躍する分野&quot;" data-v-db4642f2>​</a></h2><p data-v-db4642f2>RxJSは以下のような分野で特に強力です。Promiseだけでは実現が困難な複雑な要件を、エレガントに解決できます。</p><table tabindex="0" data-v-db4642f2><thead data-v-db4642f2><tr data-v-db4642f2><th data-v-db4642f2>分野</th><th data-v-db4642f2>具体例</th><th data-v-db4642f2>Promiseとの比較</th></tr></thead><tbody data-v-db4642f2><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>リアルタイム通信</strong></td><td data-v-db4642f2>WebSocket、SSE、チャット、株価更新</td><td data-v-db4642f2>Promiseは単発の通信のみ。連続的なメッセージ処理には不向き</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>ユーザー入力制御</strong></td><td data-v-db4642f2>検索オートコンプリート、フォームバリデーション</td><td data-v-db4642f2>debounce、distinctUntilChangedなどが標準装備</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>複数ソースの結合</strong></td><td data-v-db4642f2>検索条件×ソート順×フィルタの組み合わせ</td><td data-v-db4642f2>combineLatest、withLatestFromで簡潔に記述可能</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>オフライン対応</strong></td><td data-v-db4642f2>PWA、ネットワーク状態監視、自動再同期</td><td data-v-db4642f2>retry、retryWhenで柔軟なリトライ制御</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>ストリーミングAPI</strong></td><td data-v-db4642f2>OpenAI、AI応答のトークン逐次出力</td><td data-v-db4642f2>連続データをリアルタイムで処理可能</td></tr><tr data-v-db4642f2><td data-v-db4642f2><strong data-v-db4642f2>キャンセル制御</strong></td><td data-v-db4642f2>長時間処理の中断、古いリクエストの破棄</td><td data-v-db4642f2>unsubscribe()で即座にキャンセル可能</td></tr></tbody></table><div class="note custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>NOTE</p><p data-v-db4642f2>RxJSの活用分野の詳細は、<a href="./what-is-rxjs.html#ユースケース" data-v-db4642f2>RxJSとは何か - ユースケース</a>も参照してください。</p></div><h2 id="まとめ" tabindex="-1" data-v-db4642f2>まとめ <a class="header-anchor" href="#まとめ" aria-label="Permalink to &quot;まとめ&quot;" data-v-db4642f2>​</a></h2><table tabindex="0" data-v-db4642f2><thead data-v-db4642f2><tr data-v-db4642f2><th data-v-db4642f2>目的</th><th data-v-db4642f2>推奨</th><th data-v-db4642f2>理由</th></tr></thead><tbody data-v-db4642f2><tr data-v-db4642f2><td data-v-db4642f2>単一のHTTPリクエスト</td><td data-v-db4642f2>Promise（<code data-v-db4642f2>async/await</code>）</td><td data-v-db4642f2>シンプルで読みやすく、標準API</td></tr><tr data-v-db4642f2><td data-v-db4642f2>ユーザー入力イベントの処理</td><td data-v-db4642f2>RxJS</td><td data-v-db4642f2>debounce、distinctなどの制御が必要</td></tr><tr data-v-db4642f2><td data-v-db4642f2>リアルタイムデータ（WebSocket）</td><td data-v-db4642f2>RxJS</td><td data-v-db4642f2>連続的なメッセージを自然に扱える</td></tr><tr data-v-db4642f2><td data-v-db4642f2>複数の非同期処理の並列実行</td><td data-v-db4642f2>Promise（<code data-v-db4642f2>Promise.all</code>）</td><td data-v-db4642f2>単純な並列実行ならPromiseで十分</td></tr><tr data-v-db4642f2><td data-v-db4642f2>連続的なイベントストリーム</td><td data-v-db4642f2>RxJS</td><td data-v-db4642f2>複数の値を時系列で扱える</td></tr><tr data-v-db4642f2><td data-v-db4642f2>キャンセル可能な処理</td><td data-v-db4642f2>RxJS</td><td data-v-db4642f2>unsubscribe()で確実にキャンセル</td></tr><tr data-v-db4642f2><td data-v-db4642f2>シンプルなアプリケーション</td><td data-v-db4642f2>Promise</td><td data-v-db4642f2>学習コストが低く、依存関係が少ない</td></tr><tr data-v-db4642f2><td data-v-db4642f2>Angularアプリケーション</td><td data-v-db4642f2>RxJS</td><td data-v-db4642f2>フレームワークに標準統合されている</td></tr></tbody></table><h3 id="基本方針" tabindex="-1" data-v-db4642f2>基本方針 <a class="header-anchor" href="#基本方針" aria-label="Permalink to &quot;基本方針&quot;" data-v-db4642f2>​</a></h3><ul data-v-db4642f2><li data-v-db4642f2><strong data-v-db4642f2>シンプルに済むならPromise</strong>を使う</li><li data-v-db4642f2><strong data-v-db4642f2>複雑なストリーム処理が必要ならRxJS</strong>を使う</li><li data-v-db4642f2><strong data-v-db4642f2>両方を組み合わせる</strong>のも有効（<code data-v-db4642f2>from()</code>で橋渡し）</li></ul><p data-v-db4642f2>RxJSは強力ですが、すべての非同期処理にRxJSを使う必要はありません。適切なツールを適切な場面で使い分けることが重要です。</p><div class="tip custom-block github-alert" data-v-db4642f2><p class="custom-block-title" data-v-db4642f2>次のステップ</p><p data-v-db4642f2></p><ul data-v-db4642f2><li data-v-db4642f2><a href="/RxJS-with-TypeScript/guide/observables/what-is-observable.html" data-v-db4642f2>Observableとは</a> で Observable の詳細を学ぶ</li><li data-v-db4642f2><a href="/RxJS-with-TypeScript/guide/creation-functions/index.html" data-v-db4642f2>Creation Functions</a> で Observable の作成方法を学ぶ</li><li data-v-db4642f2><a href="/RxJS-with-TypeScript/guide/operators/index.html" data-v-db4642f2>Operators</a> で Observable の変換と制御を学ぶ</li></ul></div><hr class="footnotes-sep" data-v-db4642f2><section class="footnotes" data-v-db4642f2><ol class="footnotes-list" data-v-db4642f2><li id="fn1" class="footnote-item" data-v-db4642f2><p data-v-db4642f2>AbortControllerを使えばPromiseベースの処理（fetchなど）のキャンセルは可能ですが、Promise自体の仕様にキャンセル機能はありません。 <a href="#fnref1" class="footnote-backref" data-v-db4642f2>↩︎</a></p></li></ol></section>`,105)])])}const f=s(n,[["render",h],["__scopeId","data-v-db4642f2"]]);export{v as __pageData,f as default};
