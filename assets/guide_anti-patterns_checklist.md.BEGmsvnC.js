import{_ as e,c as r,o as a,a2 as o}from"./chunks/framework.BvXV5w7a.js";const m=JSON.parse('{"title":"アンチパターン回避チェックリスト","description":"RxJSコードを書く際に確認すべきアンチパターン回避チェックリスト。16のベストプラクティスを確認し、堅牢で保守性の高いコードを実現しましょう。","frontmatter":{"description":"RxJSコードを書く際に確認すべきアンチパターン回避チェックリスト。16のベストプラクティスを確認し、堅牢で保守性の高いコードを実現しましょう。"},"headers":[],"relativePath":"guide/anti-patterns/checklist.md","filePath":"guide/anti-patterns/checklist.md"}'),d={name:"guide/anti-patterns/checklist.md"};function c(i,t,n,s,l,h){return a(),r("div",null,t[0]||(t[0]=[o('<h1 id="アンチパターン回避チェックリスト" tabindex="-1">アンチパターン回避チェックリスト <a class="header-anchor" href="#アンチパターン回避チェックリスト" aria-label="Permalink to &quot;アンチパターン回避チェックリスト&quot;">​</a></h1><p>このチェックリストを使って、自分のRxJSコードがアンチパターンに該当していないか確認しましょう。各項目をクリックすると、詳しい解説とコード例を確認できます。</p><h2 id="チェック項目" tabindex="-1">チェック項目 <a class="header-anchor" href="#チェック項目" aria-label="Permalink to &quot;チェック項目&quot;">​</a></h2><h3 id="🔴-重大な問題の回避" tabindex="-1">🔴 重大な問題の回避 <a class="header-anchor" href="#🔴-重大な問題の回避" aria-label="Permalink to &quot;🔴 重大な問題の回避&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:center;">チェック</th><th>項目</th><th>ポイント</th></tr></thead><tbody><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#1-subject-の外部公開">Subject は asObservable() で公開</a></strong></td><td><code>Subject</code> を直接 export せず、<code>asObservable()</code> で Observable として公開<br>状態変更は専用メソッド経由でのみ可能にする</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#2-ネストした-subscribe-コールバック地獄">ネストした subscribe を避ける</a></strong></td><td><code>subscribe</code> 内で別の <code>subscribe</code> を呼ばない<br><code>switchMap</code>、<code>mergeMap</code>、<code>concatMap</code> などでフラット化</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#3-unsubscribe-忘れ-メモリリーク">無限ストリームは必ず解除</a></strong></td><td>イベントリスナーなど無限に続くストリームは必ず購読解除<br><code>takeUntil</code> パターンまたは <code>Subscription</code> の管理</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#4-sharereplay-の誤用">shareReplay の設定を明示</a></strong></td><td><code>shareReplay({ bufferSize: 1, refCount: true })</code> の形式を使用<br>メモリリークを防ぐために参照カウントを有効化</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./subscribe-if-hell.html">subscribe内のif文ネストを避ける</a></strong></td><td><code>subscribe</code> 内での複雑な条件分岐（3つ以上のネスト）を避ける<br><code>filter</code>、<code>iif</code>、<code>partition</code>などのオペレーターで宣言的に記述</td></tr></tbody></table><h3 id="🟡-注意が必要な問題の回避" tabindex="-1">🟡 注意が必要な問題の回避 <a class="header-anchor" href="#🟡-注意が必要な問題の回避" aria-label="Permalink to &quot;🟡 注意が必要な問題の回避&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:center;">チェック</th><th>項目</th><th>ポイント</th></tr></thead><tbody><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#5-map-での副作用">map は純粋関数、副作用は tap</a></strong></td><td><code>map</code> 内で状態変更やログ出力をしない<br>副作用は <code>tap</code> オペレーターで明示的に分離</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#6-cold-hot-observable-の違いの無視">Cold/Hot を適切に使い分け</a></strong></td><td>HTTP リクエストなどは <code>shareReplay</code> で Hot に変換<br>購読ごとに実行されるべきか、共有すべきかを判断</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#7-promise-と-observable-の不適切な混在">Promise は from で変換</a></strong></td><td>Promise と Observable を混在させない<br><code>from()</code> で Observable に変換して統一的に処理</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#8-バックプレッシャーの無視">高頻度イベントは制御</a></strong></td><td>検索入力は <code>debounceTime</code>、スクロールは <code>throttleTime</code> で制御<br><code>distinctUntilChanged</code> で重複を除外</td></tr></tbody></table><h3 id="🔵-コード品質の向上" tabindex="-1">🔵 コード品質の向上 <a class="header-anchor" href="#🔵-コード品質の向上" aria-label="Permalink to &quot;🔵 コード品質の向上&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:center;">チェック</th><th>項目</th><th>ポイント</th></tr></thead><tbody><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#9-エラーの握りつぶし">エラーを適切に処理</a></strong></td><td><code>catchError</code> でエラーをキャッチし、適切に処理<br>ユーザーに分かりやすいエラーメッセージを表示<br>必要に応じて <code>retry</code> / <code>retryWhen</code> で再試行</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#10-dom-イベントサブスクリプションのリーク">DOM イベントを適切に解放</a></strong></td><td><code>fromEvent</code> の購読は必ず解除<br>コンポーネント破棄時に <code>takeUntil</code> で自動解除</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#11-型安全性の欠如-any-の多用">型安全性を確保</a></strong></td><td>インターフェースや型エイリアスを定義<br><code>Observable&lt;T&gt;</code> の型パラメータを明示<br>TypeScript の型推論を活用</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#12-不適切なオペレーター選択">適切なオペレーターを選択</a></strong></td><td>検索: <code>switchMap</code>、並列: <code>mergeMap</code><br>順次: <code>concatMap</code>、連打防止: <code>exhaustMap</code></td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#13-過度な複雑化">シンプルな処理は RxJS 不要</a></strong></td><td>配列処理などは通常の JavaScript で十分<br>RxJS は非同期処理やイベントストリームに使用</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#14-subscribe-内での状態変更">状態はリアクティブに管理</a></strong></td><td><code>BehaviorSubject</code> や <code>scan</code> で状態を管理<br><code>subscribe</code> は最終的なトリガーとして使用</td></tr><tr><td style="text-align:center;"><input type="checkbox"></td><td><strong><a href="./common-mistakes.html#15-テストの欠如">テストを書く</a></strong></td><td><code>TestScheduler</code> でマーブルテストを実施<br>非同期処理を同期的にテスト可能に</td></tr></tbody></table><h2 id="使い方" tabindex="-1">使い方 <a class="header-anchor" href="#使い方" aria-label="Permalink to &quot;使い方&quot;">​</a></h2><h3 id="_1-コードレビュー時" tabindex="-1">1. コードレビュー時 <a class="header-anchor" href="#_1-コードレビュー時" aria-label="Permalink to &quot;1. コードレビュー時&quot;">​</a></h3><p>新しいコードを書いた後、このチェックリストを使って自己レビューを実施しましょう。</p><h3 id="_2-プルリクエスト時" tabindex="-1">2. プルリクエスト時 <a class="header-anchor" href="#_2-プルリクエスト時" aria-label="Permalink to &quot;2. プルリクエスト時&quot;">​</a></h3><p>プルリクエストのテンプレートにこのチェックリストを含めることで、レビュアーと共通の基準で確認できます。</p><h3 id="_3-定期的な見直し" tabindex="-1">3. 定期的な見直し <a class="header-anchor" href="#_3-定期的な見直し" aria-label="Permalink to &quot;3. 定期的な見直し&quot;">​</a></h3><p>既存のコードベースに対して定期的にこのチェックリストを使い、アンチパターンが混入していないか確認しましょう。</p><h3 id="_4-チーム内での共有" tabindex="-1">4. チーム内での共有 <a class="header-anchor" href="#_4-チーム内での共有" aria-label="Permalink to &quot;4. チーム内での共有&quot;">​</a></h3><p>チームメンバーと共有し、RxJS のベストプラクティスを統一しましょう。</p><h2 id="関連リソース" tabindex="-1">関連リソース <a class="header-anchor" href="#関連リソース" aria-label="Permalink to &quot;関連リソース&quot;">​</a></h2><ul><li><strong><a href="./common-mistakes.html">よくある間違いと対処法</a></strong> - 各アンチパターンの詳細な解説とコード例</li><li><strong><a href="./index.html">アンチパターン集トップ</a></strong> - アンチパターン一覧と学習の進め方</li><li><strong><a href="/RxJS-with-TypeScript/guide/error-handling/strategies.html">エラーハンドリング</a></strong> - エラー処理のベストプラクティス</li><li><strong><a href="/RxJS-with-TypeScript/guide/testing/unit-tests.html">テスト手法</a></strong> - RxJS コードのテスト方法</li></ul><h2 id="チェックリスト活用のコツ" tabindex="-1">チェックリスト活用のコツ <a class="header-anchor" href="#チェックリスト活用のコツ" aria-label="Permalink to &quot;チェックリスト活用のコツ&quot;">​</a></h2><ol><li><p><strong>全項目を一度に完璧にしようとしない</strong></p><ul><li>まずは重大な問題（🔴）から優先的に対処</li><li>段階的に改善していく</li></ul></li><li><p><strong>チーム内で優先度を決める</strong></p><ul><li>プロジェクトの特性に応じて重要度を調整</li><li>カスタマイズしたチェックリストを作成</li></ul></li><li><p><strong>自動化を検討</strong></p><ul><li>ESLint などの静的解析ツールで自動チェック</li><li>CI/CD パイプラインに組み込む</li></ul></li><li><p><strong>定期的に更新</strong></p><ul><li>RxJS のバージョンアップに応じて更新</li><li>チームの経験から得た知見を反映</li></ul></li></ol><hr><p><strong>重要</strong>: このチェックリストは完璧なコードを書くためのものではなく、よくある問題を避けるためのガイドです。プロジェクトの文脈に応じて柔軟に活用してください。</p>',24)]))}const p=e(d,[["render",c]]);export{m as __pageData,p as default};
