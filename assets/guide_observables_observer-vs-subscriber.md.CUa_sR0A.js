import{_ as p,C as k,c as E,o as a,a2 as e,b as l,w as i,a as t,G as r,a3 as h}from"./chunks/framework.BvXV5w7a.js";const A=JSON.parse('{"title":"Observer と Subscriber の違い","description":"RxJSのObserverとSubscriberは混同されがちですが、明確に異なる役割を持ちます。Observerはデータの受け取り方を定義するインターフェース、Subscriberは実際の購読処理を実行するクラスです。この違いを図解とコード例で解説します。","frontmatter":{"description":"RxJSのObserverとSubscriberは混同されがちですが、明確に異なる役割を持ちます。Observerはデータの受け取り方を定義するインターフェース、Subscriberは実際の購読処理を実行するクラスです。この違いを図解とコード例で解説します。"},"headers":[],"relativePath":"guide/observables/observer-vs-subscriber.md","filePath":"guide/observables/observer-vs-subscriber.md"}'),d={name:"guide/observables/observer-vs-subscriber.md"};function b(c,s,o,g,y,u){const n=k("Mermaid");return a(),E("div",null,[s[2]||(s[2]=e(`<h1 id="observer-と-subscriber-の違い" tabindex="-1">Observer と Subscriber の違い <a class="header-anchor" href="#observer-と-subscriber-の違い" aria-label="Permalink to &quot;Observer と Subscriber の違い&quot;">​</a></h1><h2 id="なぜ混同されるのか" tabindex="-1">なぜ混同されるのか <a class="header-anchor" href="#なぜ混同されるのか" aria-label="Permalink to &quot;なぜ混同されるのか&quot;">​</a></h2><p>RxJSを学習する際、「Observer」と「Subscriber」という用語が出てきて、混乱することがあります。この2つは密接に関係していますが、明確に異なる役割を持っています。</p><h2 id="observer-とは" tabindex="-1">Observer とは <a class="header-anchor" href="#observer-とは" aria-label="Permalink to &quot;Observer とは&quot;">​</a></h2><p><strong>Observer（オブザーバー）</strong> は、データを受け取るための<strong>インターフェース</strong>です。</p><h3 id="observer-の定義" tabindex="-1">Observer の定義 <a class="header-anchor" href="#observer-の定義" aria-label="Permalink to &quot;Observer の定義&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 値を受け取る</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// エラーを受け取る</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  complete</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 完了を受け取る</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="observer-の役割" tabindex="-1">Observer の役割 <a class="header-anchor" href="#observer-の役割" aria-label="Permalink to &quot;Observer の役割&quot;">​</a></h3><ul><li>データの「受け取り方」を定義</li><li>3つのコールバック関数を持つ</li><li><strong>何をするか</strong>を記述</li></ul><h2 id="subscriber-とは" tabindex="-1">Subscriber とは <a class="header-anchor" href="#subscriber-とは" aria-label="Permalink to &quot;Subscriber とは&quot;">​</a></h2><p><strong>Subscriber（サブスクライバー）</strong> は、Observer を実装した<strong>クラス</strong>で、実際の購読処理を行います。</p><h3 id="subscriber-の役割" tabindex="-1">Subscriber の役割 <a class="header-anchor" href="#subscriber-の役割" aria-label="Permalink to &quot;Subscriber の役割&quot;">​</a></h3><ul><li>Observer のコールバックを実行</li><li>Subscription（購読管理）を保持</li><li>購読解除の処理を管理</li><li><strong>どのように実行するか</strong>を制御</li></ul><h2 id="subscriber-が登場する2つの場面" tabindex="-1">Subscriber が登場する2つの場面 <a class="header-anchor" href="#subscriber-が登場する2つの場面" aria-label="Permalink to &quot;Subscriber が登場する2つの場面&quot;">​</a></h2><p>Subscriber は、実は<strong>2つの異なる場面</strong>で登場します。ただし、<strong>両方とも同じ Subscriber オブジェクト</strong>です。この違いを理解することが、混同を避けるための鍵です。</p><h3 id="場面1-observable作成時-パラメータとして受け取る" tabindex="-1">場面1: Observable作成時（パラメータとして受け取る） <a class="header-anchor" href="#場面1-observable作成時-パラメータとして受け取る" aria-label="Permalink to &quot;場面1: Observable作成時（パラメータとして受け取る）&quot;">​</a></h3><p>Observable を <code>new Observable()</code> で作成する際、コンストラクタ関数のパラメータとして <code>subscriber</code> が渡されます。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Observable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// subscriber を使って値を発行する（型は Subscriber&lt;number&gt;）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> observable$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">subscriber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 値を発行</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 完了を通知</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">この場面での subscriber の型</p><ul><li>型：<code>Subscriber&lt;number&gt;</code></li><li>役割：Observable 内部でデータを発行するために使用</li><li>開発者が直接使う（<code>next()</code>, <code>error()</code>, <code>complete()</code> を呼ぶ）</li></ul></div><h3 id="場面2-subscribe-呼び出し時-observer-→-subscriber-に変換" tabindex="-1">場面2: subscribe()呼び出し時（Observer → Subscriber に変換） <a class="header-anchor" href="#場面2-subscribe-呼び出し時-observer-→-subscriber-に変換" aria-label="Permalink to &quot;場面2: subscribe()呼び出し時（Observer → Subscriber に変換）&quot;">​</a></h3><p>Observable に対して <code>subscribe()</code> を呼ぶと、<strong>開発者が渡した Observer が内部で Subscriber に変換</strong>されます。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 開発者は Observer インターフェースを渡す</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">observable$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;次の値:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;エラー:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;完了&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ↑ RxJS が内部で以下のように Subscriber を作成</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// const subscriber = new Subscriber(observer);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// そして、この subscriber が場面1のパラメータとして渡される</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">この場面での処理</p><ol><li>開発者が <code>Observer</code> インターフェースを渡す</li><li>RxJS が内部で <code>Observer</code> を <code>Subscriber</code> にラップ</li><li>その <code>Subscriber</code> が Observable のコンストラクタ関数に渡される（= 場面1の <code>subscriber</code>）</li></ol></div><h3 id="重要-両方とも同じ-subscriber-オブジェクト" tabindex="-1">重要：両方とも同じ Subscriber オブジェクト <a class="header-anchor" href="#重要-両方とも同じ-subscriber-オブジェクト" aria-label="Permalink to &quot;重要：両方とも同じ Subscriber オブジェクト&quot;">​</a></h3><div class="important custom-block github-alert"><p class="custom-block-title">場面1と場面2の \`Subscriber\` は同じオブジェクト</p><p></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> observable$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">subscriber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // この subscriber は、subscribe() が呼ばれた時に作成された</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Subscriber オブジェクトそのもの</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">observable$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // この Observer が Subscriber にラップされ、</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 上記のコンストラクタ関数に渡される</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>つまり：</strong></p><ul><li>開発者が <code>subscribe(observer)</code> を呼ぶ</li><li>RxJS が <code>new Subscriber(observer)</code> を作成</li><li>その Subscriber が Observable のコンストラクタ関数の引数になる</li><li>だから、場面1の <code>subscriber</code> = 場面2で作成された <code>Subscriber</code></li></ul></div><h2 id="関係性の図解" tabindex="-1">関係性の図解 <a class="header-anchor" href="#関係性の図解" aria-label="Permalink to &quot;関係性の図解&quot;">​</a></h2>`,26)),(a(),l(h,null,{default:i(()=>[r(n,{id:"mermaid-165",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20Observable%5B%22Observable%22%5D%0A%20%20%20%20Subscribe%5B%22subscribe()%22%5D%0A%20%20%20%20Subscriber%5B%22Subscriber%3Cbr%2F%3E%EF%BC%88%E5%AE%9F%E8%A3%85%E3%82%AF%E3%83%A9%E3%82%B9%EF%BC%89%22%5D%0A%20%20%20%20Observer%5B%22Observer%3Cbr%2F%3E%EF%BC%88%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%EF%BC%89%22%5D%0A%20%20%20%20Subscription%5B%22Subscription%3Cbr%2F%3E%EF%BC%88%E8%B3%BC%E8%AA%AD%E7%AE%A1%E7%90%86%EF%BC%89%22%5D%0A%0A%20%20%20%20Observable%20--%3E%20Subscribe%0A%20%20%20%20Subscribe%20--%3E%7C%E5%86%85%E9%83%A8%E3%81%A7%E4%BD%9C%E6%88%90%7C%20Subscriber%0A%20%20%20%20Subscriber%20--%3E%7C%E5%AE%9F%E8%A3%85%7C%20Observer%0A%20%20%20%20Subscriber%20--%3E%7C%E4%BF%9D%E6%8C%81%E3%83%BB%E7%AE%A1%E7%90%86%7C%20Subscription%0A%0A%20%20%20%20Observer%20--%3E%7Cnext%2Ferror%2Fcomplete%7C%20Callbacks%5B%22%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF%E9%96%A2%E6%95%B0%22%5D%0A%20%20%20%20Subscription%20--%3E%7Cunsubscribe%7C%20Cleanup%5B%22%E8%B3%BC%E8%AA%AD%E8%A7%A3%E9%99%A4%22%5D%0A%0A%20%20%20%20style%20Observer%20fill%3A%23fff4e1%0A%20%20%20%20style%20Subscriber%20fill%3A%23e8f5e9%0A%20%20%20%20style%20Subscription%20fill%3A%23e1f5ff%0A"})]),fallback:i(()=>s[0]||(s[0]=[t(" Loading... ")])),_:1})),s[3]||(s[3]=e(`<h2 id="コードで見る違い" tabindex="-1">コードで見る違い <a class="header-anchor" href="#コードで見る違い" aria-label="Permalink to &quot;コードで見る違い&quot;">​</a></h2><h3 id="完全な例-observable作成から購読まで" tabindex="-1">完全な例：Observable作成から購読まで <a class="header-anchor" href="#完全な例-observable作成から購読まで" aria-label="Permalink to &quot;完全な例：Observable作成から購読まで&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Observable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. Observable作成時：subscriber を使って値を発行</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> observable$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">subscriber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;購読開始&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 購読時：Observer を渡す（内部で Subscriber が作成される）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">observable$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;次の値:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;エラー:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;完了&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 出力:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 購読開始</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 次の値: 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 次の値: 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 次の値: 3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 完了</span></span></code></pre></div><h4 id="この例では" tabindex="-1">この例では <a class="header-anchor" href="#この例では" aria-label="Permalink to &quot;この例では&quot;">​</a></h4><ul><li><strong>作成時の <code>subscriber</code></strong>: Observable 内部でデータを発行するために使用</li><li><strong>購読時の <code>Observer</code></strong>: 発行されたデータを受け取る処理を定義</li></ul><h3 id="observer-を渡す場合" tabindex="-1">Observer を渡す場合 <a class="header-anchor" href="#observer-を渡す場合" aria-label="Permalink to &quot;Observer を渡す場合&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { interval } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;完了&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Observer を subscribe に渡す</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> subscription</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> interval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(observer);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 内部で Subscriber が作成され、observer のコールバックを実行する</span></span></code></pre></div><h3 id="直接コールバックを渡す場合-簡略記法" tabindex="-1">直接コールバックを渡す場合（簡略記法） <a class="header-anchor" href="#直接コールバックを渡す場合-簡略記法" aria-label="Permalink to &quot;直接コールバックを渡す場合（簡略記法）&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// これも内部で Subscriber が作成される</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> subscription</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> interval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value),  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// next</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err),    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;完了&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// complete</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="実際の動作フロー" tabindex="-1">実際の動作フロー <a class="header-anchor" href="#実際の動作フロー" aria-label="Permalink to &quot;実際の動作フロー&quot;">​</a></h2><p>以下のシーケンス図は、Observable 作成から購読、データ発行までの流れを示しています。</p>`,11)),(a(),l(h,null,{default:i(()=>[r(n,{id:"mermaid-202",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20App%20as%20%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%0A%20%20%20%20participant%20Obs%20as%20Observable%3Cbr%2F%3E%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E9%96%A2%E6%95%B0%0A%20%20%20%20participant%20Sub%20as%20Subscriber%0A%20%20%20%20participant%20Obv%20as%20Observer%0A%0A%20%20%20%20Note%20over%20App%2CObv%3A%20%E8%B3%BC%E8%AA%AD%E3%83%95%E3%82%A7%E3%83%BC%E3%82%BA%0A%20%20%20%20App-%3E%3EObs%3A%20subscribe(observer)%0A%20%20%20%20Note%20over%20Obs%3A%20Observer%20%E3%82%92%20Subscriber%20%E3%81%AB%E3%83%A9%E3%83%83%E3%83%97%0A%20%20%20%20Obs-%3E%3ESub%3A%20new%20Subscriber(observer)%20%E3%82%92%E4%BD%9C%E6%88%90%0A%20%20%20%20Sub-%3E%3EObv%3A%20Observer%20%E3%82%92%E5%86%85%E9%83%A8%E3%81%AB%E4%BF%9D%E6%8C%81%0A%0A%20%20%20%20Note%20over%20App%2CObv%3A%20%E3%83%87%E3%83%BC%E3%82%BF%E7%99%BA%E8%A1%8C%E3%83%95%E3%82%A7%E3%83%BC%E3%82%BA%0A%20%20%20%20Note%20over%20Obs%3A%20%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E9%96%A2%E6%95%B0%E3%82%92%E5%AE%9F%E8%A1%8C%3Cbr%2F%3Esubscriber.next()%20%E3%81%8C%E5%91%BC%E3%81%B0%E3%82%8C%E3%82%8B%0A%20%20%20%20Obs-%3E%3ESub%3A%20subscriber.next(value)%0A%20%20%20%20Sub-%3E%3EObv%3A%20observer.next(value)%20%E3%82%92%E5%AE%9F%E8%A1%8C%0A%20%20%20%20Obv--%3E%3EApp%3A%20%E3%82%B3%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB%E5%87%BA%E5%8A%9B%E3%81%AA%E3%81%A9%0A%0A%20%20%20%20Note%20over%20App%2CObv%3A%20%E8%B3%BC%E8%AA%AD%E8%A7%A3%E9%99%A4%E3%83%95%E3%82%A7%E3%83%BC%E3%82%BA%0A%20%20%20%20App-%3E%3ESub%3A%20unsubscribe()%0A%20%20%20%20Sub-%3E%3EObs%3A%20%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E8%A7%A3%E6%94%BE%0A"})]),fallback:i(()=>s[1]||(s[1]=[t(" Loading... ")])),_:1})),s[4]||(s[4]=e(`<p><strong>このフローの重要なポイント：</strong></p><ol><li><code>subscribe(observer)</code> を呼ぶと、<code>new Subscriber(observer)</code> が作成される</li><li>その Subscriber が Observable のコンストラクタ関数のパラメータとして渡される</li><li>コンストラクタ関数内で <code>subscriber.next()</code> を呼ぶと、内部の <code>observer.next()</code> が実行される</li><li>つまり、<strong>場面1の <code>subscriber</code> = 場面2で作成された <code>Subscriber</code></strong></li></ol><h2 id="重要なポイント" tabindex="-1">重要なポイント <a class="header-anchor" href="#重要なポイント" aria-label="Permalink to &quot;重要なポイント&quot;">​</a></h2><div class="important custom-block github-alert"><p class="custom-block-title">Observer は「設計図」、Subscriber は「実行者」</p><p></p><ul><li><strong>Observer</strong>: データの受け取り方を<strong>定義</strong>するインターフェース</li><li><strong>Subscriber</strong>: Observer を<strong>実装</strong>し、実際に購読を<strong>実行</strong>するクラス</li><li>Subscriber は2つの場面で登場する</li></ul></div><div class="tip custom-block github-alert"><p class="custom-block-title">Subscriber を使う場面を理解しよう</p><p></p><ul><li><strong>Observable作成時</strong>: <code>new Observable(subscriber =&gt; {...})</code> の <code>subscriber</code> パラメータを直接使う</li><li><strong>購読時</strong>: <code>subscribe(observer)</code> を呼ぶと、内部で自動的に Subscriber が作成される</li></ul><p>どちらの場面でも、Subscriber は <code>next()</code>, <code>error()</code>, <code>complete()</code> メソッドを持つ同じオブジェクトです。</p></div><h2 id="よくある混同パターン" tabindex="-1">よくある混同パターン <a class="header-anchor" href="#よくある混同パターン" aria-label="Permalink to &quot;よくある混同パターン&quot;">​</a></h2><h3 id="❌-間違った理解-その1" tabindex="-1">❌ 間違った理解 その1 <a class="header-anchor" href="#❌-間違った理解-その1" aria-label="Permalink to &quot;❌ 間違った理解 その1&quot;">​</a></h3><p>「Observable作成時の <code>subscriber</code> と 購読時の <code>observer</code> は別物」</p><h3 id="❌-間違った理解-その2" tabindex="-1">❌ 間違った理解 その2 <a class="header-anchor" href="#❌-間違った理解-その2" aria-label="Permalink to &quot;❌ 間違った理解 その2&quot;">​</a></h3><p>「Subscriber は内部の実装なので、開発者は触れない」</p><h3 id="✅-正しい理解" tabindex="-1">✅ 正しい理解 <a class="header-anchor" href="#✅-正しい理解" aria-label="Permalink to &quot;✅ 正しい理解&quot;">​</a></h3><p><strong>重要な事実：</strong></p><ul><li>開発者が <code>subscribe(observer)</code> で渡す <strong>Observer</strong> は、内部で <strong>Subscriber</strong> にラップされる</li><li>その <strong>Subscriber</strong> が、Observable 作成時のコンストラクタ関数のパラメータとして渡される</li><li>つまり、<strong>場面1の <code>subscriber</code> = 場面2で作成された <code>Subscriber</code>（同一オブジェクト）</strong></li></ul><h3 id="完全な例で理解する" tabindex="-1">完全な例で理解する <a class="header-anchor" href="#完全な例で理解する" aria-label="Permalink to &quot;完全な例で理解する&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Observable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. Observable を作成（この時点では何も実行されない）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> observable$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">subscriber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;コンストラクタ関数が実行された！&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subscriber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 購読する（この瞬間に初めてコンストラクタ関数が実行される）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">observable$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;受信:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, v),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;完了&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 出力:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// コンストラクタ関数が実行された！</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 受信: 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 受信: 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 完了</span></span></code></pre></div><p><strong>この例での流れ：</strong></p><ol><li><code>observable$.subscribe({...})</code> が呼ばれる</li><li>RxJS が <code>new Subscriber({next: ..., complete: ...})</code> を作成</li><li>その <code>Subscriber</code> をパラメータとしてコンストラクタ関数 <code>(subscriber =&gt; {...})</code> が実行される</li><li>コンストラクタ関数内の <code>subscriber.next(1)</code> が呼ばれる</li><li>内部で <code>observer.next(1)</code> が実行され、「受信: 1」が出力される</li></ol><p><strong>つまり：</strong></p><ul><li>場面1の <code>subscriber</code> ← これ</li><li>場面2で作成された <code>Subscriber</code> ← これ</li><li><strong>同じオブジェクト！</strong></li></ul><h2 id="まとめ" tabindex="-1">まとめ <a class="header-anchor" href="#まとめ" aria-label="Permalink to &quot;まとめ&quot;">​</a></h2><h3 id="observer-と-subscriber-の比較" tabindex="-1">Observer と Subscriber の比較 <a class="header-anchor" href="#observer-と-subscriber-の比較" aria-label="Permalink to &quot;Observer と Subscriber の比較&quot;">​</a></h3><table tabindex="0"><thead><tr><th></th><th>Observer</th><th>Subscriber</th></tr></thead><tbody><tr><td><strong>種類</strong></td><td>インターフェース</td><td>クラス（Observer を実装）</td></tr><tr><td><strong>役割</strong></td><td>データの受け取り方を定義</td><td>実際の購読処理を実行</td></tr><tr><td><strong>内容</strong></td><td>next/error/complete のコールバック</td><td>Observer + Subscription 管理</td></tr><tr><td><strong>登場する場面</strong></td><td>購読時のみ</td><td>Observable作成時 &amp; 購読時</td></tr></tbody></table><h3 id="重要-2つの場面での関係性" tabindex="-1">重要：2つの場面での関係性 <a class="header-anchor" href="#重要-2つの場面での関係性" aria-label="Permalink to &quot;重要：2つの場面での関係性&quot;">​</a></h3><table tabindex="0"><thead><tr><th>場面</th><th>開発者が扱うもの</th><th>実際の型</th><th>関係性</th></tr></thead><tbody><tr><td><strong>Observable作成時</strong></td><td><code>new Observable(subscriber =&gt; {...})</code> のパラメータ</td><td><code>Subscriber&lt;T&gt;</code></td><td>開発者が直接使う</td></tr><tr><td><strong>購読時</strong></td><td><code>subscribe(observer)</code> に渡すオブジェクト</td><td><code>Observer&lt;T&gt;</code> → 内部で <code>Subscriber&lt;T&gt;</code> に変換</td><td>RxJS が自動変換</td></tr></tbody></table><div class="important custom-block github-alert"><p class="custom-block-title">核心のポイント</p><p></p><ul><li>開発者が <code>subscribe(observer)</code> で渡す <code>Observer</code> は、内部で <code>Subscriber</code> にラップされる</li><li>その <code>Subscriber</code> が Observable のコンストラクタ関数のパラメータとして渡される</li><li>したがって、<strong>両方の場面で使われる <code>Subscriber</code> は同一オブジェクト</strong></li></ul></div><h2 id="次のステップ" tabindex="-1">次のステップ <a class="header-anchor" href="#次のステップ" aria-label="Permalink to &quot;次のステップ&quot;">​</a></h2><p>Observer と Subscriber の違いを理解したら、次は実際の購読管理について学びましょう。</p><ul><li><a href="/RxJS-with-TypeScript/guide/observables/observable-lifecycle.html">Observableのライフサイクル</a> - 購読の開始から終了までの流れ</li><li><a href="/RxJS-with-TypeScript/guide/observables/observable-lifecycle.html#subscription-の管理">Subscription の管理</a> - 購読解除とリソース管理</li></ul><h2 id="参考リソース" tabindex="-1">参考リソース <a class="header-anchor" href="#参考リソース" aria-label="Permalink to &quot;参考リソース&quot;">​</a></h2><ul><li><a href="https://rxjs.dev/guide/observer" target="_blank" rel="noreferrer">RxJS公式ドキュメント - Observer</a> - Observer の詳細な仕様</li><li><a href="https://rxjs.dev/guide/subscription" target="_blank" rel="noreferrer">RxJS公式ドキュメント - Subscription</a> - Subscription の詳細な仕様</li></ul>`,30))])}const v=p(d,[["render",b]]);export{A as __pageData,v as default};
