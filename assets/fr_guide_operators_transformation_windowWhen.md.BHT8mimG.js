import{_ as i,c as a,o as n,a2 as e}from"./chunks/framework.D3KFGq5-.js";const E=JSON.parse(`{"title":"windowWhen - FenÃªtre avec contrÃ´le de fin dynamique","description":"L'opÃ©rateur windowWhen divise l'Observable en contrÃ´lant dynamiquement les conditions de fin. Comme la fenÃªtre suivante dÃ©marre immÃ©diatement aprÃ¨s la fin de la prÃ©cÃ©dente, il est idÃ©al pour le dÃ©coupage de donnÃ©es continu. Explique les diffÃ©rences avec bufferWhen, l'implÃ©mentation TypeScript type-safe et des exemples pratiques.","frontmatter":{"description":"L'opÃ©rateur windowWhen divise l'Observable en contrÃ´lant dynamiquement les conditions de fin. Comme la fenÃªtre suivante dÃ©marre immÃ©diatement aprÃ¨s la fin de la prÃ©cÃ©dente, il est idÃ©al pour le dÃ©coupage de donnÃ©es continu. Explique les diffÃ©rences avec bufferWhen, l'implÃ©mentation TypeScript type-safe et des exemples pratiques."},"headers":[],"relativePath":"fr/guide/operators/transformation/windowWhen.md","filePath":"fr/guide/operators/transformation/windowWhen.md","lastUpdated":1765219888000}`),t={name:"fr/guide/operators/transformation/windowWhen.md"};function l(h,s,p,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="windowwhen-fenetre-avec-controle-de-fin-dynamique" tabindex="-1">windowWhen - FenÃªtre avec contrÃ´le de fin dynamique <a class="header-anchor" href="#windowwhen-fenetre-avec-controle-de-fin-dynamique" aria-label="Permalink to &quot;windowWhen - FenÃªtre avec contrÃ´le de fin dynamique&quot;">â€‹</a></h1><p>L&#39;opÃ©rateur <code>windowWhen</code> <strong>contrÃ´le dynamiquement les conditions de fin</strong> pour diviser l&#39;Observable. Il rÃ©alise un pattern de traitement de flux continu oÃ¹ lorsqu&#39;une fenÃªtre se termine, la fenÃªtre suivante dÃ©marre immÃ©diatement.</p><h2 id="ğŸ”°-syntaxe-de-base-et-utilisation" tabindex="-1">ğŸ”° Syntaxe de base et utilisation <a class="header-anchor" href="#ğŸ”°-syntaxe-de-base-et-utilisation" aria-label="Permalink to &quot;ğŸ”° Syntaxe de base et utilisation&quot;">â€‹</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { interval } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { windowWhen, mergeAll, take } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> source$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> interval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ã‰met toutes les 0.5 secondes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Condition de fin : aprÃ¨s 1 seconde</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> closingSelector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> interval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">source$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  windowWhen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(closingSelector),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  take</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mergeAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Valeur dans la fenÃªtre :&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// FenÃªtre 1 : 0       (dÃ©marrage 0s â†’ fin 1s)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// FenÃªtre 2 : 1, 2    (dÃ©marrage 1s â†’ fin 2s)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// FenÃªtre 3 : 3, 4    (dÃ©marrage 2s â†’ fin 3s)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// FenÃªtre 4 : 5, 6    (dÃ©marrage 3s â†’ fin 4s)</span></span></code></pre></div><p><strong>Flux d&#39;opÃ©ration</strong> :</p><ol><li>La premiÃ¨re fenÃªtre dÃ©marre automatiquement</li><li>L&#39;Observable retournÃ© par <code>closingSelector()</code> Ã©met une valeur â†’ fin de la fenÃªtre</li><li><strong>ImmÃ©diatement, la fenÃªtre suivante dÃ©marre</strong></li><li>RÃ©pÃ©tition de 2-3</li></ol><p><a href="https://rxjs.dev/api/operators/windowWhen" target="_blank" rel="noreferrer">ğŸŒ Documentation officielle RxJS - <code>windowWhen</code></a></p><h2 id="ğŸ’¡-patterns-d-utilisation-typiques" tabindex="-1">ğŸ’¡ Patterns d&#39;utilisation typiques <a class="header-anchor" href="#ğŸ’¡-patterns-d-utilisation-typiques" aria-label="Permalink to &quot;ğŸ’¡ Patterns d&#39;utilisation typiques&quot;">â€‹</a></h2><ul><li>Collecte de donnÃ©es Ã  intervalles dynamiques</li><li>Traitement de flux adaptatif selon la charge</li><li>ContrÃ´le de fenÃªtre basÃ© sur les rÃ©sultats prÃ©cÃ©dents</li><li>Regroupement de donnÃ©es continu</li></ul><h2 id="ğŸ”-differences-avec-bufferwhen" tabindex="-1">ğŸ” DiffÃ©rences avec bufferWhen <a class="header-anchor" href="#ğŸ”-differences-avec-bufferwhen" aria-label="Permalink to &quot;ğŸ” DiffÃ©rences avec bufferWhen&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">OpÃ©rateur</th><th style="text-align:left;">Sortie</th><th style="text-align:left;">Cas d&#39;utilisation</th></tr></thead><tbody><tr><td style="text-align:left;"><code>bufferWhen</code></td><td style="text-align:left;"><strong>Tableau (T[])</strong></td><td style="text-align:left;">Traitement groupÃ© des valeurs</td></tr><tr><td style="text-align:left;"><code>windowWhen</code></td><td style="text-align:left;"><strong>Observable&lt;T&gt;</strong></td><td style="text-align:left;">Traitement de flux diffÃ©rent par groupe</td></tr></tbody></table><h2 id="ğŸ§ -exemple-de-code-pratique-collecte-de-donnees-adaptative" tabindex="-1">ğŸ§  Exemple de code pratique : collecte de donnÃ©es adaptative <a class="header-anchor" href="#ğŸ§ -exemple-de-code-pratique-collecte-de-donnees-adaptative" aria-label="Permalink to &quot;ğŸ§  Exemple de code pratique : collecte de donnÃ©es adaptative&quot;">â€‹</a></h2><p>Exemple d&#39;ajustement de la durÃ©e de la fenÃªtre suivante basÃ© sur les rÃ©sultats de la fenÃªtre prÃ©cÃ©dente.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { interval, timer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { windowWhen, mergeMap, toArray, map } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rxjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WindowStats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  nextDuration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> interval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> previousCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ajuste la durÃ©e de la fenÃªtre suivante selon la quantitÃ© de donnÃ©es</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getNextDuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Beaucoup de donnÃ©es â†’ intervalle court</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ModÃ©rÃ© â†’ intervalle moyen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Peu de donnÃ©es â†’ intervalle long</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  windowWhen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> timer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNextDuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(previousCount))),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mergeMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">window$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      toArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        previousCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          count: data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          nextDuration: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNextDuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WindowStats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stats</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Taille fenÃªtre : \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} Ã©lÃ©ments, prochaine durÃ©e : \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nextDuration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}ms\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="ğŸ†š-differences-avec-windowtoggle" tabindex="-1">ğŸ†š DiffÃ©rences avec windowToggle <a class="header-anchor" href="#ğŸ†š-differences-avec-windowtoggle" aria-label="Permalink to &quot;ğŸ†š DiffÃ©rences avec windowToggle&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">OpÃ©rateur</th><th style="text-align:left;">ContrÃ´le</th><th style="text-align:left;">PÃ©riode de fenÃªtre</th><th style="text-align:left;">Cas d&#39;utilisation</th></tr></thead><tbody><tr><td style="text-align:left;"><code>windowWhen(closing)</code></td><td style="text-align:left;">Fin uniquement</td><td style="text-align:left;">Continue</td><td style="text-align:left;">FenÃªtre pÃ©riodique simple</td></tr><tr><td style="text-align:left;"><code>windowToggle(open$, close)</code></td><td style="text-align:left;">DÃ©but et fin sÃ©parÃ©s</td><td style="text-align:left;">Chevauchement possible</td><td style="text-align:left;">Conditions dÃ©but/fin complexes</td></tr></tbody></table><p><strong>Points de diffÃ©renciation</strong> :</p><ul><li><strong><code>windowWhen</code></strong> : pour traiter toutes les donnÃ©es en continu sans omissions (collecte de logs, agrÃ©gation de donnÃ©es, etc.)</li><li><strong><code>windowToggle</code></strong> : pour traiter les donnÃ©es pendant une pÃ©riode spÃ©cifique (heures de bureau, pendant l&#39;appui sur un bouton, etc.)</li></ul><h2 id="âš ï¸-points-d-attention" tabindex="-1">âš ï¸ Points d&#39;attention <a class="header-anchor" href="#âš ï¸-points-d-attention" aria-label="Permalink to &quot;âš ï¸ Points d&#39;attention&quot;">â€‹</a></h2><h3 id="_1-doit-retourner-un-nouvel-observable-a-chaque-fois" tabindex="-1">1. Doit retourner un nouvel Observable Ã  chaque fois <a class="header-anchor" href="#_1-doit-retourner-un-nouvel-observable-a-chaque-fois" aria-label="Permalink to &quot;1. Doit retourner un nouvel Observable Ã  chaque fois&quot;">â€‹</a></h3><p>La fonction <code>closingSelector</code> doit <strong>retourner un nouvel Observable Ã  chaque fois</strong>. Retourner la mÃªme instance ne fonctionnera pas correctement.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ Mauvais exemple : rÃ©utilisation de la mÃªme instance Observable</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> closingObservable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> timer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">source$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  windowWhen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> closingObservable) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ne fonctionne pas aprÃ¨s le premier !</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… Bon exemple : gÃ©nÃ¨re un nouvel Observable Ã  chaque fois</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">source$.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  windowWhen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> timer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// GÃ©nÃ¨re un nouveau timer Ã  chaque fois</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="_2-gestion-des-abonnements-aux-fenetres" tabindex="-1">2. Gestion des abonnements aux fenÃªtres <a class="header-anchor" href="#_2-gestion-des-abonnements-aux-fenetres" aria-label="Permalink to &quot;2. Gestion des abonnements aux fenÃªtres&quot;">â€‹</a></h3><p>Chaque fenÃªtre est un Observable indÃ©pendant et doit Ãªtre explicitement souscrite ou aplatie avec <code>mergeAll()</code>.</p><h2 id="ğŸ“š-operateurs-associes" tabindex="-1">ğŸ“š OpÃ©rateurs associÃ©s <a class="header-anchor" href="#ğŸ“š-operateurs-associes" aria-label="Permalink to &quot;ğŸ“š OpÃ©rateurs associÃ©s&quot;">â€‹</a></h2><ul><li><a href="./bufferWhen"><code>bufferWhen</code></a> - Regroupe les valeurs en tableau (version tableau de windowWhen)</li><li><a href="./window"><code>window</code></a> - Division de fenÃªtre par timing d&#39;un autre Observable</li><li><a href="./windowTime"><code>windowTime</code></a> - Division de fenÃªtre basÃ©e sur le temps</li><li><a href="./windowCount"><code>windowCount</code></a> - Division de fenÃªtre basÃ©e sur le nombre</li><li><a href="./windowToggle"><code>windowToggle</code></a> - ContrÃ´le de fenÃªtre avec Observables dÃ©but/fin</li></ul><h2 id="resume" tabindex="-1">RÃ©sumÃ© <a class="header-anchor" href="#resume" aria-label="Permalink to &quot;RÃ©sumÃ©&quot;">â€‹</a></h2><p>L&#39;opÃ©rateur <code>windowWhen</code> est un outil pratique qui contrÃ´le dynamiquement les conditions de fin et rÃ©alise un traitement de fenÃªtre continu.</p><ul><li>âœ… Peut contrÃ´ler dynamiquement les conditions de fin</li><li>âœ… Traitement de fenÃªtre continu (ne perd pas de donnÃ©es)</li><li>âœ… Peut ajuster la fenÃªtre suivante basÃ© sur les rÃ©sultats prÃ©cÃ©dents</li><li>âš ï¸ NÃ©cessite une gestion des abonnements</li><li>âš ï¸ Doit retourner un nouvel Observable Ã  chaque fois</li><li>âš ï¸ Attention Ã  ne pas rendre les conditions de fin trop complexes</li></ul>`,29)])])}const g=i(t,[["render",l]]);export{E as __pageData,g as default};
